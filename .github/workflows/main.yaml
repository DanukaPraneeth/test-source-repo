name: Continuous Integration

on: push
        
jobs:
    replicate-file:
        runs-on: ubuntu-latest
        name: Replicate File
        
        steps:
        - name: Checkout main-project
          uses: actions/checkout@v2
          with:
            path: ./

        - name: Checkout secondary-project
          uses: actions/checkout@master
          with: 
            repository: DanukaPraneeth/test-target-repo
            token: ${{ secrets.Token }}
            path: ./

        - name: Copy file
          run: |
            cp -r ./test-source-repo/* ./test-target-repo/
            
        - name: Push To Repo2
          run: |
            cd ./test-target-repo
            git add .
            git config user.name "DanukaPraneeth"
            git config user.email “danuka@gmail.com”
            git checkout -b update-form
            git commit -am "Update files"
            git push --set-upstream origin update-form
            
        - name: pull-request
          uses: repo-sync/pull-request@v2
          with:
            destination_branch: "main" 
            source_branch: "update-form"
            
